<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" th:lang="${#locale}">
<head th:fragment="head (title)" th:remove="tag">
    <title th:text="${title} + ' - ' + #{sitename}"></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/4.4.1/css/bootstrap.min.css}"/>
    <link rel="stylesheet" type="text/css" th:if="${!#strings.equals(#themes.code('stylesheet'), 'default')}"
          th:href="@{/webjars/bootswatch/4.4.1/dist/__${#themes.code('stylesheet')}__/bootstrap.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap-select/1.13.11/css/bootstrap-select.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/font-awesome/5.12.0/css/all.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/webjars/flag-icon-css/3.4.6/css/flag-icon.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/vendor/air-datepicker/2.2.3/css/datepicker.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/template.css}"/>
    <script type="text/javascript" th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
    <script type="text/javascript" th:src="@{/webjars/popper.js/1.14.3/umd/popper.min.js}"></script>
    <script type="text/javascript" th:src="@{/webjars/bootstrap/4.4.1/js/bootstrap.min.js}"></script>
    <script type="text/javascript" th:src="@{/webjars/bootstrap-select/1.13.11/js/bootstrap-select.min.js}"></script>
    <script type="text/javascript" th:src="@{/webjars/tinymce/5.0.9/tinymce.min.js}"></script>
    <script type="text/javascript" th:src="@{/webjars/Sortable/Sortable.min.js}"></script>
    <script type="text/javascript" th:src="@{/vendor/jquery-sortable/js/jquery-sortable.min.js}"></script>
    <script type="text/javascript" th:src="@{/vendor/air-datepicker/2.2.3/js/datepicker.min.js}"></script>
    <script type="text/javascript" th:src="@{/vendor/settings.js}"></script>
</head>
<body>

<header th:fragment="header">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" th:href="@{/}" th:text="#{sitename}"></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto" sec:authorize="isAnonymous()"></ul>
                <ul class="navbar-nav mr-auto" sec:authorize="isAuthenticated()">
                    <li class="nav-item" th:classappend="${#httpServletRequest.requestURI == '/'} ? 'active'">
                        <a class="nav-link" th:href="@{/}"><i class="fas fa-book fa-fw"></i>  <span th:text="#{nav.myPrograms}"></span></a>
                    </li>
                    <li class="nav-item" th:classappend="${#httpServletRequest.requestURI == '/bonuses'} ? 'active'">
                        <a class="nav-link" th:href="@{/bonuses}"><i class="fas fa-gift fa-fw"></i>  <span th:text="#{nav.myBonuses}"></span></a>
                    </li>
                    <li class="nav-item" th:classappend="${#httpServletRequest.requestURI == '/shop'} ? 'active'">
                        <a class="nav-link" th:href="@{/shop}"><i class="fas fa-shopping-basket fa-fw"></i> <span th:text="#{nav.shop}"></span></a>
                    </li>

                    <li class="nav-item dropdown" sec:authorize="hasAuthority('ADMIN')">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-shield-alt fa-fw"></i> <span th:text="#{nav.admin}"></span>
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item"
                               th:href="@{/admin}"
                               th:classappend="${#httpServletRequest.requestURI == '/admin'} ? 'active'">
                                <i class="fas fa-chart-bar fa-fw"></i> <span th:text="#{nav.adminpanel}"></span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item"
                               th:href="@{/admin/programs}"
                               th:classappend="${#httpServletRequest.requestURI == '/admin/programs'} ? 'active'">
                                <i class="fas fa-book fa-fw"></i> <span th:text="#{nav.programs}"></span>
                            </a>
                            <a class="dropdown-item"
                               th:href="@{/admin/program/add}"
                               th:classappend="${#httpServletRequest.requestURI == '/admin/program/add'} ? 'active'">
                                <i class="fas fa-plus-circle fa-fw"></i> <span th:text="#{nav.addProgram}"></span>
                            </a>
                            <a class="dropdown-item"
                               th:href="@{/admin/folder/add(category='MODULE')}"
                               th:classappend="${#httpServletRequest.requestURI == '/admin/folder/add'} ? 'active'">
                                <i class="fas fa-plus-circle fa-fw"></i> <span th:text="#{nav.addModule}"></span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item"
                               th:href="@{/admin/bonuses}"
                               th:classappend="${#httpServletRequest.requestURI == '/admin/bonuses'} ? 'active'">
                                <i class="fas fa-gift fa-fw"></i> <span th:text="#{nav.bonuses}"></span>
                            </a>
                            <a class="dropdown-item"
                               th:href="@{/admin/folder/add(category='BONUS')}"
                               th:classappend="${#httpServletRequest.requestURI == '/admin/folder/add'} ? 'active'">
                                <i class="fas fa-plus-circle fa-fw"></i> <span th:text="#{button.AddBonus}"></span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item"
                               th:href="@{/admin/offerings}"
                               th:classappend="${#httpServletRequest.requestURI == '/admin/offerings'} ? 'active'">
                                <i class="fas fa-file-invoice-dollar fa-fw"></i> <span th:text="#{nav.offerings}"></span>
                            </a>
                            <a class="dropdown-item"
                               th:href="@{/admin/offering/add}"
                               th:classappend="${#httpServletRequest.requestURI == '/admin/offering/add'} ? 'active'">
                                <i class="fas fa-plus-circle fa-fw"></i> <span th:text="#{nav.addOffering}"></span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item"
                               th:href="@{/admin/users}"
                               th:classappend="${#httpServletRequest.requestURI == '/admin/users'} ? 'active'">
                                <i class="fas fa-users fa-fw"></i> <span th:text="#{nav.users}"></span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item"
                               th:href="@{/admin/events}"
                               th:classappend="${#httpServletRequest.requestURI == '/admin/events'} ? 'active'">
                                <i class="fas fa-calendar-alt fa-fw"></i> <span th:text="#{nav.events}"></span>
                            </a>
                        </div>
                    </li>
                </ul>
                <ul class="navbar-nav" sec:authorize="isAuthenticated()">
                    <li class="nav-item" th:classappend="${#httpServletRequest.requestURI == '/'} ? 'active'">
                        <a class="nav-link" th:href="@{/cart}"><i class="fas fa-shopping-cart fa-fw"></i> <span th:text="#{nav.cart}"></span></a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                            <i class="fas fa-palette fa-fw"></i>
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" th:each="theme : ${T(ua.kazo.dentalacademy.enumerated.BootswatchTheme).values()}"
                               th:classappend="${#strings.equals(#themes.code('stylesheet'), theme.name().toLowerCase())} ? 'active'"
                               th:href="@{__${#httpServletRequest.requestURI}__(theme=__${theme.name().toLowerCase()}__)}"
                               th:text="${theme.name().toLowerCase()}"></a>
                        </div>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                            <i class="fas fa-flag fa-fw"></i>
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" th:each="lang : ${T(ua.kazo.dentalacademy.enumerated.Languages).values()}"
                               th:classappend="${#strings.equals(#locale, lang.getLanguage())} ? 'active'"
                               th:href="@{__${#httpServletRequest.requestURI}__(lang=__${lang.getLanguage()}__)}">
                                <span th:class="${'flag-icon flag-icon-' + lang.getCountry()}"></span> <span th:text="#{${'lang.' + lang.getLanguage()}}"></span>
                            </a>
                        </div>
                    </li>
                </ul>
                <ul class="navbar-nav" sec:authorize="isAuthenticated()">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                            <i class="fas fa-user fa-fw"></i>
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" th:classappend="${#httpServletRequest.requestURI == '/profile'} ? 'active'" th:href="@{/profile}"><i class="fas fa-address-card fa-fw"></i> <span th:text="#{nav.profile}"></span></a>
                            <a class="dropdown-item" th:classappend="${#httpServletRequest.requestURI == '/orders'} ? 'active'" th:href="@{/orders}"><i class="fas fa-shopping-bag fa-fw"></i> <span th:text="#{nav.ordersHistory}"></span></a>
                            <a class="dropdown-item" th:classappend="${#httpServletRequest.requestURI == '/profile/password'} ? 'active'" th:href="@{/profile/password}"><i class="fas fa-key fa-fw"></i> <span th:text="#{nav.password}"></span></a>
                            <form method="post" th:action="@{/logout}">
                                <button type="submit" class="dropdown-item"><i class="fas fa-sign-out-alt fa-fw"></i> <span th:text="#{nav.logout}"></span></button>
                            </form>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<div th:fragment="alerts (errors, success, exception)">
    <div th:if="${errors}" class="alert alert-danger" th:fragment="alert-errors (errors)">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        <h5 th:text="#{error}"></h5>
        <div th:each="error : ${errors}">
            <div><span th:text="#{field}"></span> <strong th:text="${error.field}"></strong> <span th:text="${error.defaultMessage != null} ? ${error.defaultMessage} : #{${error.code}}"></span></div>
        </div>
    </div>
    <div th:if="${success}" class="alert alert-success" th:fragment="alert-success (success)">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        <span th:text="#{${success}}"></span>
    </div>
    <div th:if="${exception}" class="alert alert-danger" th:fragment="alert-exception (exception)">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        <span th:text="${exception}"></span>
    </div>
</div>

<footer th:fragment="footer">
    <div class="bg-dark">
        <div class="container text-center pt-4 pb-3">
            <ul class="social-icons icon-circle icon-zoom list-unstyled list-inline pb-3">
                <li><a target="_blank" title="YouTube Channel" href="https://www.youtube.com/channel/UC5Fsc-THl_lpzTuja-EOyrg"><i class="fab fa-youtube"></i></a></li>
                <li><a target="_blank" title="Instagram Page" href="https://www.instagram.com/business.stomatology/"><i class="fab fa-instagram"></i></a></li>
                <li><a target="_blank" title="Telegram Group" href="https://t.me/business_stomatology"><i class="fab fa-telegram"></i></a></li>
            </ul>
            <div class="text-white" th:text="'&copy; 2020 ' + #{sitename}"></div>
        </div>
    </div>
</footer>

<div th:fragment="search-form (search, count)" th:remove="tag">
    <form th:action="@{__${#httpServletRequest.requestURI}__}" method="get">
        <div class="form-row justify-content-between align-items-center" th:classappend="${#strings.isEmpty(search)} ? 'flex-row-reverse'">
            <div class="col-auto" th:if="${!#strings.isEmpty(search)}">
                <h6 th:text="#{info.searchResults} + ': ' + ${count}"></h6>
            </div>
            <div class="col-auto">
                <label class="sr-only" for="search" th:value="#{program.name}"></label>
                <div class="input-group mb-2">
                    <input type="text" class="form-control" id="search" name="search" autofocus th:placeholder="#{button.search}" th:value="${search}">
                    <div class="input-group-append">
                        <button type="submit" class="btn btn-primary"><i class="fas fa-search fa-fw"></i></button>
                        <a th:href="@{__${#httpServletRequest.requestURI}__}" class="btn btn-danger"><i class="fas fa-times-circle fa-fw"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<nav th:if="${result.totalPages > 1}" th:fragment="pagination (result, search)">
    <ul class="pagination justify-content-center">
        <li th:classappend="${result.pageable.pageNumber == 0} ? 'disabled'" class="page-item">
            <a th:href="@{__${#httpServletRequest.requestURI}__(page=0,size=${result.pageable.pageSize},search=${search})}" class="page-link" th:text="#{button.first}"></a>
        </li>
        <li th:classappend="${result.pageable.pageNumber == 0} ? 'disabled'" class="page-item">
            <a th:href="@{__${#httpServletRequest.requestURI}__(page=${result.pageable.pageNumber - 1},size=${result.pageable.pageSize},search=${search})}" class="page-link" th:text="#{button.previous}"></a>
        </li>
        <li th:classappend="${result.pageable.pageNumber == i} ? 'active'" th:each="i : ${#numbers.sequence(0, result.totalPages - 1)}" class="page-item">
            <span th:if="${result.pageable.pageNumber == i}" class="page-link" th:text="${i + 1}"></span>
            <a th:unless="${result.pageable.pageNumber == i}" th:href="@{__${#httpServletRequest.requestURI}__(page=${i},size=${result.pageable.pageSize},search=${search})}" th:text="${i + 1}" class="page-link"></a>
        </li>
        <li th:classappend="${result.pageable.pageNumber == result.totalPages - 1} ? 'disabled'" class="page-item">
            <a th:href="@{__${#httpServletRequest.requestURI}__(page=${result.pageable.pageNumber + 1},size=${result.pageable.pageSize},search=${search})}" class="page-link" th:text="#{button.next}"></a>
        </li>
        <li th:classappend="${result.pageable.pageNumber == result.totalPages - 1} ? 'disabled'" class="page-item">
            <a th:href="@{__${#httpServletRequest.requestURI}__(page=${result.totalPages - 1},size=${result.pageable.pageSize},search=${search})}" class="page-link" th:text="#{button.last}"></a>
        </li>
    </ul>
</nav>

<!--<div th:fragment="modal">-->
<!--    <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">-->
<!--        <div class="modal-dialog" role="document">-->
<!--            <div class="modal-content">-->
<!--                <div class="modal-header">-->
<!--                    <h5 class="modal-title" id="modalLabel"></h5>-->
<!--                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--                        <span aria-hidden="true">&times;</span>-->
<!--                    </button>-->
<!--                </div>-->
<!--                <div class="modal-body"></div>-->
<!--                <div class="modal-footer">-->
<!--                    <form th:action="@{/entity/remove}" method="post">-->
<!--                        <input type="hidden" name="id" id="removeFormEntityId" value="">-->
<!--                        <button type="button" class="btn btn-danger" onclick="this.form.submit()" th:text="#{entity.remove}"></button>-->
<!--                    </form>-->
<!--                    <button type="button" class="btn btn-secondary" data-dismiss="modal" th:text="#{button.cancel}"></button>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--    <script type="text/javascript" th:src="@{/js/entityManageButtons.js}"></script>-->
<!--</div>-->

</body>
</html>
